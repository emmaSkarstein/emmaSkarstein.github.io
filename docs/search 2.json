{
  "articles": [
    {
      "path": "index.html",
      "title": "Emma Skarstein",
      "author": [],
      "contents": "\n\n          \n          \n          Emma Skarstein\n          \n          \n          \n          \n          \n          ☰\n          \n          \n      \n        \n          Emma Skarstein\n          \n            \n                \n                  \n                    LinkedIn\n                  \n                \n              \n                            \n                \n                  \n                    GitHub\n                  \n                \n              \n                            \n                \n                  \n                    E-mail\n                  \n                \n              \n                          \n        \n\n        \n          \n      \n      \n        \n          \n          BIO\n          I’m a PhD student of statistics at the Norwegian University of Science and Technology (NTNU). I’m currently working with Bayesian methods for measurement error correction, using integrated nested Laplace approximation (INLA). Apart from that, I also really enjoy data visualization, specifically I use R programming language and the ggplot2 package for this. In my free time, I garden and play with my incredible cat Hermione (who is an aspiring celebrity on Instagram).\n          \n          \n          PORTFOLIO\n          A wide selection of personal and professional work, including data visualizations, conference posters, presentation slides, and educational resources.\n          \n          Data graphics and visualization resources\n          \n          \n          \n          TIDY TUESDAY DATA VISUALIZATIONS | Every Tuesday, the Tidy Tuesday project publishes a dataset for people to practice their data cleaning and data visualization. This GitHub repository contains all my contributions!\n          .\n          .\n          .\n          \n          \n          \n          CREATING CUSTOM THEMES IN GGPLOT2 | A cheatsheet created based on a presentation held for the NTNU statistics group coding group: “Moving beyond theme_gray: Exploring customized themes for improved visualizations in ggplot2”\n          .\n          .\n          \n          \n          \n          THE ANATOMY OF A GGPLOT2-PLOT | My reference for remembering all the different theme-variables in ggplot2.\n          .\n          .\n          \n          \n          Posters\n          \n          \n          \n          A JOINT BAYESIAN FRAMEWORK FOR MEASUREMENT ERROR AND MISSING DATA | Poster presentation from Nordstat 2021 conference, “The 28th Nordic Conference in Mathematical Statistics”, presenting my work on jointly modelling measurement error and missing data using INLA.\n          .\n          .\n          .\n          \n          \n        \n      \n    \n\n    \n      \n        \n          \n            \n              \n            \n              Emma Skarstein\n            \n            \n              \n                \n                                    \n                    \n                      LinkedIn\n                    \n                  \n                                    \n                    \n                      GitHub\n                    \n                  \n                                    \n                    \n                      E-mail\n                    \n                  \n                                  \n              \n            \n            \n              \n              BIO\n              I’m a PhD student of statistics at the Norwegian University of Science and Technology (NTNU). I’m currently working with Bayesian methods for measurement error correction, using integrated nested Laplace approximation (INLA). Apart from that, I also really enjoy data visualization, specifically I use R programming language and the ggplot2 package for this. In my free time, I garden and play with my incredible cat Hermione (who is an aspiring celebrity on Instagram).\n              \n              \n              PORTFOLIO\n              A wide selection of personal and professional work, including data visualizations, conference posters, presentation slides, and educational resources.\n              \n              Data graphics and visualization resources\n              \n              \n              \n              TIDY TUESDAY DATA VISUALIZATIONS | Every Tuesday, the Tidy Tuesday project publishes a dataset for people to practice their data cleaning and data visualization. This GitHub repository contains all my contributions!\n              .\n              .\n              .\n              \n              \n              \n              CREATING CUSTOM THEMES IN GGPLOT2 | A cheatsheet created based on a presentation held for the NTNU statistics group coding group: “Moving beyond theme_gray: Exploring customized themes for improved visualizations in ggplot2”\n              .\n              .\n              \n              \n              \n              THE ANATOMY OF A GGPLOT2-PLOT | My reference for remembering all the different theme-variables in ggplot2.\n              .\n              .\n              \n              \n              Posters\n              \n              \n              \n              A JOINT BAYESIAN FRAMEWORK FOR MEASUREMENT ERROR AND MISSING DATA | Poster presentation from Nordstat 2021 conference, “The 28th Nordic Conference in Mathematical Statistics”, presenting my work on jointly modelling measurement error and missing data using INLA.\n              .\n              .\n              .\n              \n              \n            \n        \n      \n    \n\n    \n    \n    ",
      "last_modified": "2021-10-21T14:51:59+02:00"
    },
    {
      "path": "Power_usage_project.html",
      "title": "Power usage analysis",
      "author": [],
      "contents": "\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nEmma Skarstein\n\n\n\n\n\n☰\n\n\n  \n    \n      \n        \n        \n        \n      \n      \n    \n    \n      \n  \n    \n     \n  \n\n      \n  \n\n\n\n\n\nCode \nShow All Code\nHide All Code\n\n\n\n\nPower usage analysis\n\n\n\n\nLatest update: January 25th 2021\nWelcome to my power usage project! Through elhub I have downloaded (and will continue to download) monthly data sets containing the hourly power usage in my appartment. I made an R-package that contains all the data plus some useful functions. Here I will explore some visualisations of the data.\nMy goal is to produce visualizations of these data that are easy to interpret for people without any particular statistical background. I this document I will be trying out different things and showing a bit of the process, so this is not meant to be a perfect finished product, rather a kind of documentation of the process.\n#devtools::install_github(\"emmaSkarstein/power.usage.analysis\")\nlibrary(power.usage.analysis)\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(hrbrthemes)\nlibrary(ggridges)\nlibrary(patchwork)\nlibrary(jcolors)\nlibrary(ggpubr)\ntheme_set(theme_bw())\nFirst, let us load the data and look at the structure of it.\ndata <- clean_and_prepare(power_data)\nhead(data)\n##                      tid forbruk       date month weekday year     hour\n## ...1 2019-01-14 00:00:00   0.338 2019-01-13     1  Monday 2019 00:00:00\n## ...2 2019-01-14 01:00:00   1.047 2019-01-14     1  Monday 2019 01:00:00\n## ...3 2019-01-14 02:00:00   0.327 2019-01-14     1  Monday 2019 02:00:00\n## ...4 2019-01-14 03:00:00   1.475 2019-01-14     1  Monday 2019 03:00:00\n## ...5 2019-01-14 04:00:00   2.791 2019-01-14     1  Monday 2019 04:00:00\n## ...6 2019-01-14 05:00:00   3.286 2019-01-14     1  Monday 2019 05:00:00\nSo our data cosists of the hourly power consumption, as well as columns giving the year, date, month, weekday and hour for each observation. Now I want to explore some visualizations.\n\nBasic plot\nLet’s first try a simple plot of all the observations.\np_simple <- ggplot(data, aes(x = tid, y = forbruk)) + \n  geom_line() +\n  ylab(\"Power usage\") +\n  xlab(\"\")\np_simple\n\nThis is a mess. While we do see some general tendencies that are interesting (like maximum consumption varying seasonally), it is difficult to tell what is going on in all the noise. It is also worth noting the really low values during August of 2020. This was due to some error with our power measuring device, and we had to have a guy from the company come fix it. I won’t be handling this in any special way, for now I will just treat them along with the rest of the data. It is worth noting that the values have not been set to zero or NA, instead they are just unrealistically low. If these kinds of problems with the measuring device was a common problem, this would be really frustrating, as there is no way of knowing then if the measurement is actually that low or if there is an error (although appearently we didn’t get charged less for this period, since they knew something was wrong they instead extrapolated from the previous correct values).\n\n\nAverage per weekday - Pitfalls of the boxplot\nAnother option is to try to group the data by some time period by summing or averaging it. For instance, we can look at the power usage for each weekday. For this, we might be interested in looking at the average power consuption per day, which could easily be calculated. However, just calculating the average, without showing any information about the spread or variation in the observations, is not very good. And when we also have the option to display things graphically instead of just giving summary statistics, a boxplot is a common choice. In this case, a boxplot would look like this:\nggplot(data, aes(x = weekday, y = forbruk)) +\n  geom_boxplot(fill = \"hotpink3\") +\n  ylab(\"Power usage\") +\n  xlab(\"\") +\n  annotate(\"text\", x = 1, y = c(-0.1, 0.4, 0.75, 1.9, 4.5, 6), label = c(\"Minimum\", \"25th percentile\", \"Median\", \"75th percentile\", \"Maximum\", \"Outliers\"), size = 2.2, fontface = \"bold\", color= \"darkcyan\")\n\nThe boxplot displays a lot of information. The first thing I look at is the bold line in the middle of the orange box, which indicates the median (the 50th percentile) of the values in this group. The edges of the box indicate the 25th and 75th percentiles (25th percentile means the value that 25% of the observations lie below, and 75% lie above, and similarly for the 75th percentile). The ends of the “whiskers” show the minimum and maximum value of the data, excluding the outliers, and then the outliers are plotted explicitly.\n\nThe box plot (or plots with range-bars) was introduced by the data visualization specialist Mary Eleanor Spear, first in her book Charting statistics in 1952.\n\nFrom the above plot, it really doesn’t look to me like there are any real differences in power usage between each weekday. I would be ok with leaving it like this, but boxplots are a bit controversial, since they may easily show the same box plot for observations of very different distributions. See this nice article for a further discussion of this. There are some ways to fix this, however. A simple fix to make sure we aren’t hiding any important information about the distribution of the data is to plot a jittered scatterplot on top. That would look like this for us:\nggplot(data, aes(x = weekday, y = forbruk)) +\n  geom_boxplot(fill = \"darkorange\") +\n  ylab(\"Power usage\") +\n  xlab(\"\") +\n  geom_jitter(color=\"black\", size=0.4, alpha=0.9)\n\nThis is quite transparent, but in our case it looks chaotic since we have so many observations. It also does’t solve the problem that the boxplot is not immediately obvious if you have never seen one before, which I would say is a major disadvantage when visualizing data for most audiences.\nAn alternative to the box-plot is the violin plot. Personally, I’m not a fan of the violin plot because I initially found the fact that it is symmetric around a center line to be a bit confusing. If I want the plot to be really easy to interpret, I find the ridge plot to be superior to both the boxplot and violin plot. Here is how it looks using the same data as above:\nggplot(data, aes(x = forbruk, y = weekday)) +\n  geom_density_ridges(alpha = 0.8, fill = \"hotpink3\") +\n  theme_ridges() +\n  ylab(\"\") +\n  xlab(\"Power usage\")\n\n—-some interpretation of this—-\nAs a last point I just want to compare the boxplot, violin plot and ridge plot here for the reader, because I think preferences vary and it is interesting seeing the different options (note that I’ve flipped the axes on the two first so they are the same direction as the ridge plot).\np_box <- ggplot(data, aes(y = weekday, x = forbruk)) +\n  geom_boxplot(fill = \"darkorange2\") +\n  xlab(\"\") +\n  ylab(\"\")\n\np_violin <-ggplot(data, aes(y = weekday, x = forbruk)) +\n  geom_violin(fill = \"hotpink3\") +\n  xlab(\"\") +\n  ylab(\"\") + \n  theme(axis.text.y = element_blank())\n\np_ridges <- ggplot(data, aes(x = forbruk, y = weekday)) +\n  geom_density_ridges(alpha = 0.8, fill = \"darkgreen\") +\n  ylab(\"\") +\n  xlab(\"\") +\n  theme(axis.text.y = element_blank())\n\n(p_box + p_violin + xlab(\"Power usage\") + p_ridges) \n\nOkay, it pretty much looks like the distribution is the same for each week day, maybe not surprisingly, although I might have expected the consumption to be a bit higher during the week-end. Really kind of boring.\n\n\nDid the pandemic affect power usage for each weekday?\nHowever, during most of 2020 we worked from home. Could it be that this is affecting the results, and that weekday differences were larger in 2019? Let’s investigate.\nggplot(data, aes(x = weekday, y = forbruk, fill = year)) +\n  geom_boxplot() +\n  ylab(\"Power usage\") +\n  xlab(\"\") +\n  scale_fill_brewer(palette = \"Dark2\")\n\nThere are some differences here, but I really don’t think we can say for certain that there is a meaningful difference between the power consumption in 2019 and 2020 for any of the weekdays. This makes sense, because although we were probably more outside of the appartment in 2019, usually there would be at least one of us at home regardless, so the situation is not very different.\n\n\nTotal per month\nInspired by the weekday plots, I want to examine if the total monthly power consumption has changed between 2019 and 2020. Instead of looking at the median, average or some other measure per month, I will simply look at the total power consumption per month in 2019, and separately in 2020, since a month is a continuous stretch of time. Had I been looking at monthly consumption not separated by year, however, I would have calculated the average total monthly consumption across those years. Maybe that will be interesting once I have data from more than just two years.\nAnyway – here is the total power usage per month for 2019 and 2020. This is also the plot that our power provider shows me on their webpage, and I feel like it is particularly useful for just seeing how much we use. Of course – some months are longer than others, so it is not completely fair to compare between the months, but it certainly gives a rough impression.\nyear_month <- data %>%\n  group_by(month, year) %>%\n  summarise(sum_forb = sum(forbruk))\n\nggplot(year_month, aes(x = month, y = sum_forb)) +\n  geom_col(aes(fill = year), color = \"black\", position = \"dodge\") +\n  scale_fill_jcolors(palette = \"pal6\") +\n  ylab(\"Total power usage per month\") +\n  xlab(\"\")\n\nHere we can sort of see the seasonal trend, and it seems very reasonable to me. I find it interesting that March is the month with the highest power consumption, I would not have guessed that in advance.\n\n\nDaily usage\nThere is another resolution between our first plot and the monthly total plot in the previous section: it might also be interesting to look at the total daily consumption. I expect this will be slightly smoother than the first plot, and it may be interesting to see the time-series day-by-day instead of grouped by month like above.\ndaily <- data %>%\n  group_by(date) %>%\n  summarise(sum_forb = sum(forbruk))\n\nggplot(daily, aes(x = date, y = sum_forb)) +\n  geom_point(size = 0.5) +\n  geom_line(alpha = 0.5, color = \"hotpink4\") +\n  ylab(\"Power usage\") +\n  xlab(\"\")\n\nHere we see more of the variation between different days in the same month. I would really have liked to know what happened on those peak days.\n\n\nUsage throughout the day\nAs a final plot, I would like to know how the power usage is distributed throughout the day. First just a simple box plot:\nggplot(data, aes(x = hour, y = forbruk)) +\n  geom_boxplot(fill = \"hotpink3\") +\n  ylab(\"Power usage\") +\n  xlab(\"\") +\n  theme(axis.text.x = element_text(angle = 45))\n\nI also want to try a fancier, less detailed version that represents time periods with higher usage as larger areas. I have split the day into 3-hour intervals (should I use a finer resolution?), and the below plot shows the total power consumption in each time period. (Would it be better with a donut to represent the day as a cycle?) (would be nice to show the times on the plot somehow)\n# Adding grouped time column\ndata <- data %>% mutate(grouped_time = \n                          factor(floor(as.numeric(substr(hour, start = 1, stop = 2))/3)))\n\nggplot(data, aes(x = 1, y = -forbruk, fill = grouped_time)) +\n  geom_col() +\n  scale_fill_brewer(labels = c(\"00:00 - 02:00\", \"03:00 - 05:00\", \n                                 \"06:00 - 08:00\", \"09:00 - 11:00\", \n                                 \"12:00 - 14:00\", \"15:00 - 17:00\",\n                                \"18:00 - 20:00\", \"21:00 - 23:00\"),\n                    palette = \"BrBG\") +\n  theme_transparent() +\n  coord_flip() +\n  theme(legend.position = \"bottom\",\n        legend.title = element_blank())\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// add bootstrap table styles to pandoc tables\nfunction bootstrapStylePandocTables() {\n  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');\n}\n$(document).ready(function () {\n  bootstrapStylePandocTables();\n});\n\n\n\n$(document).ready(function () {\n  window.buildTabsets(\"TOC\");\n});\n\n$(document).ready(function () {\n  $('.tabset-dropdown > .nav-tabs > li').click(function () {\n    $(this).parent().toggleClass('nav-tabs-open');\n  });\n});\n\n$(document).ready(function () {\n  window.initializeCodeFolding(\"hide\" === \"show\");\n});\n\n$(document).ready(function ()  {\n\n    // temporarily add toc-ignore selector to headers for the consistency with Pandoc\n    $('.unlisted.unnumbered').addClass('toc-ignore')\n\n    // move toc-ignore selectors from section div to header\n    $('div.section.toc-ignore')\n        .removeClass('toc-ignore')\n        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');\n\n    // establish options\n    var options = {\n      selectors: \"h1\",\n      theme: \"bootstrap3\",\n      context: '.toc-content',\n      hashGenerator: function (text) {\n        return text.replace(/[.\\\\/?&!#<>]/g, '').replace(/\\s/g, '_');\n      },\n      ignoreSelector: \".toc-ignore\",\n      scrollTo: 0\n    };\n    options.showAndHide = true;\n    options.smoothScroll = true;\n\n    // tocify\n    var toc = $(\"#TOC\").tocify(options).data(\"toc-tocify\");\n});\n\n  (function () {\n    var script = document.createElement(\"script\");\n    script.type = \"text/javascript\";\n    script.src  = \"https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML\";\n    document.getElementsByTagName(\"head\")[0].appendChild(script);\n  })();\n",
      "last_modified": "2021-10-21T14:52:00+02:00"
    }
  ],
  "collections": []
}
